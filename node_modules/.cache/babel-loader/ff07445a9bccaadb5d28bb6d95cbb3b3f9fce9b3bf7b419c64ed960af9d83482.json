{"ast":null,"code":"// Утилиты для поиска\nexport const buildSearchQuery = (district = '', kind = '') => {\n  const params = new URLSearchParams();\n  if (district && district.trim()) {\n    params.append('district', district.trim());\n  }\n  if (kind && kind.trim()) {\n    params.append('kind', kind.trim());\n  }\n  return params.toString();\n};\nexport const parseSearchQuery = query => {\n  // Анализируем поисковый запрос для извлечения района и вида\n  const result = {\n    district: '',\n    kind: ''\n  };\n  if (!query) return result;\n\n  // Список районов для поиска (полное соответствие)\n  const districts = ['Адмиралтейский район', 'Василеостровский район', 'Выборгский район', 'Калининский район', 'Кировский район', 'Колпинский район', 'Красногвардейский район', 'Красносельский район', 'Кронштадтский район', 'Курортный район', 'Московский район', 'Невский район', 'Петроградский район', 'Петродворцовый район', 'Приморский район', 'Пушкинский район', 'Фрунзенский район', 'Центральный район'];\n  const queryLower = query.toLowerCase().trim();\n\n  // Ищем полное соответствие района\n  for (const district of districts) {\n    if (queryLower === district.toLowerCase()) {\n      result.district = district;\n      return result;\n    }\n  }\n\n  // Если район не найден, считаем весь запрос поиском по виду\n  result.kind = query;\n  return result;\n};\nexport const performSearch = async (query, page = 1, limit = 10) => {\n  try {\n    const searchParams = parseSearchQuery(query);\n    const queryString = buildSearchQuery(searchParams.district, searchParams.kind);\n    if (!queryString) {\n      return {\n        success: false,\n        error: 'Введите параметры для поиска',\n        data: [],\n        total: 0,\n        page: 1,\n        limit: limit\n      };\n    }\n    const url = `https://pets.xn--80ahdri7a.site/api/search?${queryString}&page=${page}&limit=${limit}`;\n    const response = await fetch(url, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n    if (response.status === 204) {\n      return {\n        success: true,\n        data: [],\n        total: 0,\n        page: page,\n        limit: limit,\n        query: query,\n        searchParams: searchParams\n      };\n    }\n    if (!response.ok) {\n      throw new Error(`Ошибка поиска: ${response.status}`);\n    }\n    const result = await response.json();\n    if (result.data && result.data.orders) {\n      const processedResults = result.data.orders.map(order => ({\n        id: order.id,\n        kind: order.kind || \"Животное\",\n        description: order.description || \"Нет описания\",\n        date: order.date || \"Дата не указана\",\n        district: order.district || \"Район не указан\",\n        mark: order.mark || \"Нет\",\n        photos: order.photos ? `https://pets.xn--80ahdri7a.site${order.photos}` : null,\n        photo: order.photo ? `https://pets.xn--80ahdri7a.site${order.photo}` : null,\n        name: order.name || \"Не указано\",\n        phone: order.phone || \"Не указан\",\n        email: order.email || \"Не указан\"\n      }));\n      return {\n        success: true,\n        data: processedResults,\n        total: result.data.total || processedResults.length,\n        page: page,\n        limit: limit,\n        query: query,\n        searchParams: searchParams\n      };\n    }\n    return {\n      success: true,\n      data: [],\n      total: 0,\n      page: page,\n      limit: limit,\n      query: query,\n      searchParams: searchParams\n    };\n  } catch (error) {\n    console.error(\"Ошибка поиска:\", error);\n    return {\n      success: false,\n      error: 'Ошибка при выполнении поиска',\n      data: [],\n      total: 0,\n      page: page,\n      limit: limit\n    };\n  }\n};","map":{"version":3,"names":["buildSearchQuery","district","kind","params","URLSearchParams","trim","append","toString","parseSearchQuery","query","result","districts","queryLower","toLowerCase","performSearch","page","limit","searchParams","queryString","success","error","data","total","url","response","fetch","method","headers","status","ok","Error","json","orders","processedResults","map","order","id","description","date","mark","photos","photo","name","phone","email","length","console"],"sources":["C:/Users/2053-23/pets.site3-main/src/components/utils/serchUtils.js"],"sourcesContent":["\r\n// Утилиты для поиска\r\nexport const buildSearchQuery = (district = '', kind = '') => {\r\n  const params = new URLSearchParams();\r\n  \r\n  if (district && district.trim()) {\r\n    params.append('district', district.trim());\r\n  }\r\n  \r\n  if (kind && kind.trim()) {\r\n    params.append('kind', kind.trim());\r\n  }\r\n  \r\n  return params.toString();\r\n};\r\n\r\nexport const parseSearchQuery = (query) => {\r\n  // Анализируем поисковый запрос для извлечения района и вида\r\n  const result = {\r\n    district: '',\r\n    kind: ''\r\n  };\r\n  \r\n  if (!query) return result;\r\n  \r\n  // Список районов для поиска (полное соответствие)\r\n  const districts = [\r\n    'Адмиралтейский район',\r\n    'Василеостровский район',\r\n    'Выборгский район',\r\n    'Калининский район',\r\n    'Кировский район',\r\n    'Колпинский район',\r\n    'Красногвардейский район',\r\n    'Красносельский район',\r\n    'Кронштадтский район',\r\n    'Курортный район',\r\n    'Московский район',\r\n    'Невский район',\r\n    'Петроградский район',\r\n    'Петродворцовый район',\r\n    'Приморский район',\r\n    'Пушкинский район',\r\n    'Фрунзенский район',\r\n    'Центральный район'\r\n  ];\r\n  \r\n  const queryLower = query.toLowerCase().trim();\r\n  \r\n  // Ищем полное соответствие района\r\n  for (const district of districts) {\r\n    if (queryLower === district.toLowerCase()) {\r\n      result.district = district;\r\n      return result;\r\n    }\r\n  }\r\n  \r\n  // Если район не найден, считаем весь запрос поиском по виду\r\n  result.kind = query;\r\n  return result;\r\n};\r\n\r\nexport const performSearch = async (query, page = 1, limit = 10) => {\r\n  try {\r\n    const searchParams = parseSearchQuery(query);\r\n    const queryString = buildSearchQuery(searchParams.district, searchParams.kind);\r\n    \r\n    if (!queryString) {\r\n      return {\r\n        success: false,\r\n        error: 'Введите параметры для поиска',\r\n        data: [],\r\n        total: 0,\r\n        page: 1,\r\n        limit: limit\r\n      };\r\n    }\r\n    \r\n    const url = `https://pets.xn--80ahdri7a.site/api/search?${queryString}&page=${page}&limit=${limit}`;\r\n    const response = await fetch(url, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n    \r\n    if (response.status === 204) {\r\n      return {\r\n        success: true,\r\n        data: [],\r\n        total: 0,\r\n        page: page,\r\n        limit: limit,\r\n        query: query,\r\n        searchParams: searchParams\r\n      };\r\n    }\r\n    \r\n    if (!response.ok) {\r\n      throw new Error(`Ошибка поиска: ${response.status}`);\r\n    }\r\n    \r\n    const result = await response.json();\r\n    \r\n    if (result.data && result.data.orders) {\r\n      const processedResults = result.data.orders.map(order => ({\r\n        id: order.id,\r\n        kind: order.kind || \"Животное\",\r\n        description: order.description || \"Нет описания\",\r\n        date: order.date || \"Дата не указана\",\r\n        district: order.district || \"Район не указан\",\r\n        mark: order.mark || \"Нет\",\r\n        photos: order.photos ? `https://pets.xn--80ahdri7a.site${order.photos}` : null,\r\n        photo: order.photo ? `https://pets.xn--80ahdri7a.site${order.photo}` : null,\r\n        name: order.name || \"Не указано\",\r\n        phone: order.phone || \"Не указан\",\r\n        email: order.email || \"Не указан\"\r\n      }));\r\n      \r\n      return {\r\n        success: true,\r\n        data: processedResults,\r\n        total: result.data.total || processedResults.length,\r\n        page: page,\r\n        limit: limit,\r\n        query: query,\r\n        searchParams: searchParams\r\n      };\r\n    }\r\n    \r\n    return {\r\n      success: true,\r\n      data: [],\r\n      total: 0,\r\n      page: page,\r\n      limit: limit,\r\n      query: query,\r\n      searchParams: searchParams\r\n    };\r\n    \r\n  } catch (error) {\r\n    console.error(\"Ошибка поиска:\", error);\r\n    return {\r\n      success: false,\r\n      error: 'Ошибка при выполнении поиска',\r\n      data: [],\r\n      total: 0,\r\n      page: page,\r\n      limit: limit\r\n    };\r\n  }\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}