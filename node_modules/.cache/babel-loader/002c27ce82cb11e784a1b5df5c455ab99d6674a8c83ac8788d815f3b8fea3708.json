{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\2053-23\\\\pets.site3-main\\\\pets.site3\\\\src\\\\components\\\\find_animals_page.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport image from './image/image.jfif';\nimport image2 from './image/image3.jfif';\nimport image1 from './image/image2.jfif';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Find_animal({\n  filters\n}) {\n  _s();\n  const [animals, setAnimals] = useState([]);\n  const [filteredAnimals, setFilteredAnimals] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n  const [currentPage, setCurrentPage] = useState(1);\n  const [totalPages, setTotalPages] = useState(1);\n  const [searchParams, setSearchParams] = useState({\n    district: \"\",\n    kind: \"\",\n    query: \"\"\n  });\n\n  // Загрузка животных с пагинацией\n  const fetchAnimals = async (page = 1, searchQuery = null) => {\n    setLoading(true);\n    setError(\"\");\n    try {\n      let url = 'https://pets.xn--80ahdri7a.site/api/search/order/';\n      const params = new URLSearchParams();\n\n      // Добавляем параметры поиска если есть\n      if (searchQuery) {\n        params.append('query', searchQuery);\n      } else if (searchParams.district || searchParams.kind) {\n        if (searchParams.district) params.append('district', searchParams.district);\n        if (searchParams.kind) params.append('kind', searchParams.kind);\n      }\n\n      // Добавляем пагинацию\n      params.append('page', page);\n      params.append('per_page', 10);\n      url = `${url}?${params.toString()}`;\n      const response = await fetch(url, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      if (!response.ok) {\n        throw new Error(`Ошибка сервера: ${response.status}`);\n      }\n      const data = await response.json();\n      if (data.data && data.data.orders) {\n        // Преобразуем данные в формат приложения\n        const formattedAnimals = data.data.orders.map(order => ({\n          id: order.id,\n          title: `${order.kind}, найден ${order.date}`,\n          description: order.description,\n          image: order.photos || (order.photo ? order.photo : image),\n          // Используем первую фото если есть\n          date: order.date,\n          type: order.kind.toLowerCase().includes('кош') || order.kind.toLowerCase().includes('кот') ? 'cat' : order.kind.toLowerCase().includes('собак') || order.kind.toLowerCase().includes('пёс') ? 'dog' : order.kind.toLowerCase().includes('кролик') ? 'rabbit' : 'other',\n          age: \"возраст не указан\",\n          location: order.district || \"Место не указано\",\n          mark: order.mark,\n          phone: order.phone,\n          email: order.email,\n          name: order.name\n        }));\n        setAnimals(formattedAnimals);\n        setFilteredAnimals(formattedAnimals);\n        setTotalPages(Math.ceil(formattedAnimals.length / 6)); // Примерная пагинация\n      } else {\n        setAnimals([]);\n        setFilteredAnimals([]);\n      }\n    } catch (err) {\n      console.error('Ошибка при загрузке животных:', err);\n      setError(\"Не удалось загрузить список животных\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Загрузка при монтировании\n  useEffect(() => {\n    fetchAnimals();\n  }, []);\n\n  // Применение фильтров\n  useEffect(() => {\n    if (!animals.length) return;\n    let result = animals;\n    if (filters.animalType !== 'all') {\n      result = result.filter(animal => animal.type === filters.animalType);\n    }\n    if (filters.dateRange !== 'all') {\n      const now = new Date();\n      result = result.filter(animal => {\n        try {\n          const animalDate = new Date(animal.date.split('-').reverse().join('-'));\n          const diffTime = Math.abs(now - animalDate);\n          const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n          if (filters.dateRange === 'week') return diffDays <= 7;\n          if (filters.dateRange === 'month') return diffDays <= 30;\n          if (filters.dateRange === 'older') return diffDays > 30;\n          return true;\n        } catch {\n          return true;\n        }\n      });\n    }\n    setFilteredAnimals(result);\n  }, [filters, animals]);\n  const [sortOrder, setSortOrder] = useState('newest');\n  const handleSort = order => {\n    setSortOrder(order);\n    const sorted = [...filteredAnimals].sort((a, b) => {\n      try {\n        const dateA = new Date(a.date.split('-').reverse().join('-'));\n        const dateB = new Date(b.date.split('-').reverse().join('-'));\n        if (order === 'newest') {\n          return dateB - dateA;\n        } else {\n          return dateA - dateB;\n        }\n      } catch {\n        return 0;\n      }\n    });\n    setFilteredAnimals(sorted);\n  };\n\n  // Быстрый поиск\n  const handleQuickSearch = async query => {\n    if (query.length > 2) {\n      try {\n        const response = await fetch(`https://pets.xn--80ahdri7a.site/api/search?query=${encodeURIComponent(query)}`);\n        if (response.ok) {\n          const data = await response.json();\n          if (data.data && data.data.orders) {\n            const formattedAnimals = data.data.orders.map(order => ({\n              id: order.id,\n              title: `${order.kind}, найден ${order.date}`,\n              description: order.description,\n              image: order.photos || image,\n              date: order.date,\n              type: order.kind.toLowerCase().includes('кош') ? 'cat' : order.kind.toLowerCase().includes('собак') ? 'dog' : order.kind.toLowerCase().includes('кролик') ? 'rabbit' : 'other',\n              age: \"возраст не указан\",\n              location: order.district || \"Место не указано\"\n            }));\n            setFilteredAnimals(formattedAnimals);\n          }\n        }\n      } catch (err) {\n        console.error('Ошибка быстрого поиска:', err);\n      }\n    }\n  };\n\n  // Поиск по фильтрам\n  const handleSearch = () => {\n    fetchAnimals(1);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container mt-5\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-4\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            className: \"form-control\",\n            placeholder: \"\\u0420\\u0430\\u0439\\u043E\\u043D (\\u043D\\u0430\\u043F\\u0440\\u0438\\u043C\\u0435\\u0440, \\u0426\\u0435\\u043D\\u0442\\u0440\\u0430\\u043B\\u044C\\u043D\\u044B\\u0439)\",\n            value: searchParams.district,\n            onChange: e => setSearchParams({\n              ...searchParams,\n              district: e.target.value\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-4\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            className: \"form-control\",\n            placeholder: \"\\u0412\\u0438\\u0434 (\\u043D\\u0430\\u043F\\u0440\\u0438\\u043C\\u0435\\u0440, \\u043A\\u043E\\u0448\\u043A\\u0430)\",\n            value: searchParams.kind,\n            onChange: e => setSearchParams({\n              ...searchParams,\n              kind: e.target.value\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-4\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-dark w-100\",\n            onClick: handleSearch,\n            children: \"\\u041F\\u043E\\u0438\\u0441\\u043A\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row mb-3\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-12\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            className: \"form-control\",\n            placeholder: \"\\u0411\\u044B\\u0441\\u0442\\u0440\\u044B\\u0439 \\u043F\\u043E\\u0438\\u0441\\u043A \\u043F\\u043E \\u043E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u044E (\\u0432\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043C\\u0438\\u043D\\u0438\\u043C\\u0443\\u043C 3 \\u0441\\u0438\\u043C\\u0432\\u043E\\u043B\\u0430)\",\n            onChange: e => {\n              const query = e.target.value;\n              if (query.length > 2) {\n                const timer = setTimeout(() => {\n                  handleQuickSearch(query);\n                }, 1000);\n                return () => clearTimeout(timer);\n              }\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row mb-5\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-12 text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"\\u041F\\u043E\\u043C\\u043E\\u0433\\u0438\\u0442\\u0435 \\u043D\\u0430\\u0439\\u0442\\u0438 \\u0445\\u043E\\u0437\\u044F\\u0435\\u0432 \\u0434\\u043B\\u044F \\u044D\\u0442\\u0438\\u0445 \\u0436\\u0438\\u0432\\u043E\\u0442\\u043D\\u044B\\u0445\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"lead\",\n            children: [\"\\u041D\\u0430\\u0439\\u0434\\u0435\\u043D\\u043E \\u0436\\u0438\\u0432\\u043E\\u0442\\u043D\\u044B\\u0445: \", filteredAnimals.length, /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-sm btn-outline-dark ms-3\",\n              onClick: () => handleSort(sortOrder === 'newest' ? 'oldest' : 'newest'),\n              children: [\"\\u0421\\u043E\\u0440\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u043F\\u043E \", sortOrder === 'newest' ? 'старым' : 'новым']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 9\n      }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"spinner-border text-dark\",\n          role: \"status\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"visually-hidden\",\n            children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u0436\\u0438\\u0432\\u043E\\u0442\\u043D\\u044B\\u0445...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 11\n      }, this) : error ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center alert alert-danger\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430 \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-dark\",\n          onClick: () => fetchAnimals(),\n          children: \"\\u041F\\u043E\\u0432\\u0442\\u043E\\u0440\\u0438\\u0442\\u044C \\u043F\\u043E\\u043F\\u044B\\u0442\\u043A\\u0443\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 11\n      }, this) : filteredAnimals.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"\\u0416\\u0438\\u0432\\u043E\\u0442\\u043D\\u044B\\u0435 \\u043F\\u043E \\u0432\\u044B\\u0431\\u0440\\u0430\\u043D\\u043D\\u044B\\u043C \\u0444\\u0438\\u043B\\u044C\\u0442\\u0440\\u0430\\u043C \\u043D\\u0435 \\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u044B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u041F\\u043E\\u043F\\u0440\\u043E\\u0431\\u0443\\u0439\\u0442\\u0435 \\u0438\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u043F\\u0430\\u0440\\u0430\\u043C\\u0435\\u0442\\u0440\\u044B \\u0444\\u0438\\u043B\\u044C\\u0442\\u0440\\u0430\\u0446\\u0438\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row mb-5\",\n          children: filteredAnimals.slice((currentPage - 1) * 6, currentPage * 6).map(animal => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-4 mb-4\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card animal-card h-100 d-flex flex-column\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: animal.image,\n                className: \"card-img-top\",\n                alt: animal.type,\n                style: {\n                  width: '100%',\n                  height: '300px',\n                  objectFit: 'cover'\n                },\n                onError: e => {\n                  e.target.src = animal.type === 'cat' ? image : animal.type === 'dog' ? image1 : animal.type === 'rabbit' ? image2 : image;\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 270,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card-body d-flex flex-column\",\n                children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                  className: \"card-title\",\n                  children: animal.title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 286,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"card-text flex-grow-1\",\n                  children: animal.description\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 287,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mb-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"badge bg-secondary me-2\",\n                    children: animal.age\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 289,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"badge bg-info\",\n                    children: animal.location\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 290,\n                    columnNumber: 25\n                  }, this), animal.mark && /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"badge bg-warning text-dark ms-2\",\n                    children: [\"\\u041A\\u043B\\u0435\\u0439\\u043C\\u043E: \", animal.mark]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 292,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 288,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-auto\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn btn-dark me-3\",\n                    \"data-bs-toggle\": \"modal\",\n                    \"data-bs-target\": \"#cart\",\n                    onClick: () => {\n                      // Здесь можно передать данные в модальное окно\n                      localStorage.setItem('selectedAnimal', JSON.stringify(animal));\n                    },\n                    children: \"\\u041F\\u043E\\u0434\\u0440\\u043E\\u0431\\u043D\\u0435\\u0435\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 298,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 297,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 285,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 269,\n              columnNumber: 19\n            }, this)\n          }, animal.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 13\n        }, this), totalPages > 1 && /*#__PURE__*/_jsxDEV(\"nav\", {\n          \"aria-label\": \"\\u041F\\u0430\\u0433\\u0438\\u043D\\u0430\\u0446\\u0438\\u044F\",\n          children: /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"pagination justify-content-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"li\", {\n              className: `page-item ${currentPage === 1 ? 'disabled' : ''}`,\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"page-link\",\n                onClick: () => setCurrentPage(currentPage - 1),\n                disabled: currentPage === 1,\n                children: \"\\u041D\\u0430\\u0437\\u0430\\u0434\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 321,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 320,\n              columnNumber: 19\n            }, this), [...Array(totalPages)].map((_, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n              className: `page-item ${currentPage === index + 1 ? 'active' : ''}`,\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"page-link\",\n                onClick: () => setCurrentPage(index + 1),\n                children: index + 1\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 332,\n                columnNumber: 23\n              }, this)\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 331,\n              columnNumber: 21\n            }, this)), /*#__PURE__*/_jsxDEV(\"li\", {\n              className: `page-item ${currentPage === totalPages ? 'disabled' : ''}`,\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"page-link\",\n                onClick: () => setCurrentPage(currentPage + 1),\n                disabled: currentPage === totalPages,\n                children: \"\\u0412\\u043F\\u0435\\u0440\\u0435\\u0434\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 342,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 341,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 319,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 180,\n    columnNumber: 5\n  }, this);\n}\n_s(Find_animal, \"53kfAeZS+fIjRcE+pVJ7NnjpSPE=\");\n_c = Find_animal;\nexport default Find_animal;\nvar _c;\n$RefreshReg$(_c, \"Find_animal\");","map":{"version":3,"names":["React","useState","useEffect","image","image2","image1","jsxDEV","_jsxDEV","Fragment","_Fragment","Find_animal","filters","_s","animals","setAnimals","filteredAnimals","setFilteredAnimals","loading","setLoading","error","setError","currentPage","setCurrentPage","totalPages","setTotalPages","searchParams","setSearchParams","district","kind","query","fetchAnimals","page","searchQuery","url","params","URLSearchParams","append","toString","response","fetch","method","headers","ok","Error","status","data","json","orders","formattedAnimals","map","order","id","title","date","description","photos","photo","type","toLowerCase","includes","age","location","mark","phone","email","name","Math","ceil","length","err","console","result","animalType","filter","animal","dateRange","now","Date","animalDate","split","reverse","join","diffTime","abs","diffDays","sortOrder","setSortOrder","handleSort","sorted","sort","a","b","dateA","dateB","handleQuickSearch","encodeURIComponent","handleSearch","children","className","placeholder","value","onChange","e","target","fileName","_jsxFileName","lineNumber","columnNumber","onClick","timer","setTimeout","clearTimeout","role","slice","src","alt","style","width","height","objectFit","onError","localStorage","setItem","JSON","stringify","disabled","Array","_","index","_c","$RefreshReg$"],"sources":["C:/Users/2053-23/pets.site3-main/pets.site3/src/components/find_animals_page.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport image from './image/image.jfif';\r\nimport image2 from './image/image3.jfif';\r\nimport image1 from './image/image2.jfif';\r\n\r\nfunction Find_animal({ filters }) {\r\n  const [animals, setAnimals] = useState([]);\r\n  const [filteredAnimals, setFilteredAnimals] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [totalPages, setTotalPages] = useState(1);\r\n  const [searchParams, setSearchParams] = useState({\r\n    district: \"\",\r\n    kind: \"\",\r\n    query: \"\"\r\n  });\r\n\r\n  // Загрузка животных с пагинацией\r\n  const fetchAnimals = async (page = 1, searchQuery = null) => {\r\n    setLoading(true);\r\n    setError(\"\");\r\n    \r\n    try {\r\n      let url = 'https://pets.xn--80ahdri7a.site/api/search/order/';\r\n      const params = new URLSearchParams();\r\n      \r\n      // Добавляем параметры поиска если есть\r\n      if (searchQuery) {\r\n        params.append('query', searchQuery);\r\n      } else if (searchParams.district || searchParams.kind) {\r\n        if (searchParams.district) params.append('district', searchParams.district);\r\n        if (searchParams.kind) params.append('kind', searchParams.kind);\r\n      }\r\n      \r\n      // Добавляем пагинацию\r\n      params.append('page', page);\r\n      params.append('per_page', 10);\r\n      \r\n      url = `${url}?${params.toString()}`;\r\n      \r\n      const response = await fetch(url, {\r\n        method: 'GET',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`Ошибка сервера: ${response.status}`);\r\n      }\r\n\r\n      const data = await response.json();\r\n      \r\n      if (data.data && data.data.orders) {\r\n        // Преобразуем данные в формат приложения\r\n        const formattedAnimals = data.data.orders.map(order => ({\r\n          id: order.id,\r\n          title: `${order.kind}, найден ${order.date}`,\r\n          description: order.description,\r\n          image: order.photos || (order.photo ? order.photo : image), // Используем первую фото если есть\r\n          date: order.date,\r\n          type: order.kind.toLowerCase().includes('кош') || order.kind.toLowerCase().includes('кот') ? 'cat' : \r\n                order.kind.toLowerCase().includes('собак') || order.kind.toLowerCase().includes('пёс') ? 'dog' : \r\n                order.kind.toLowerCase().includes('кролик') ? 'rabbit' : 'other',\r\n          age: \"возраст не указан\",\r\n          location: order.district || \"Место не указано\",\r\n          mark: order.mark,\r\n          phone: order.phone,\r\n          email: order.email,\r\n          name: order.name\r\n        }));\r\n        \r\n        setAnimals(formattedAnimals);\r\n        setFilteredAnimals(formattedAnimals);\r\n        setTotalPages(Math.ceil(formattedAnimals.length / 6)); // Примерная пагинация\r\n      } else {\r\n        setAnimals([]);\r\n        setFilteredAnimals([]);\r\n      }\r\n    } catch (err) {\r\n      console.error('Ошибка при загрузке животных:', err);\r\n      setError(\"Не удалось загрузить список животных\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Загрузка при монтировании\r\n  useEffect(() => {\r\n    fetchAnimals();\r\n  }, []);\r\n\r\n  // Применение фильтров\r\n  useEffect(() => {\r\n    if (!animals.length) return;\r\n    \r\n    let result = animals;\r\n    \r\n    if (filters.animalType !== 'all') {\r\n      result = result.filter(animal => animal.type === filters.animalType);\r\n    }\r\n    \r\n    if (filters.dateRange !== 'all') {\r\n      const now = new Date();\r\n      result = result.filter(animal => {\r\n        try {\r\n          const animalDate = new Date(animal.date.split('-').reverse().join('-'));\r\n          const diffTime = Math.abs(now - animalDate);\r\n          const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n          \r\n          if (filters.dateRange === 'week') return diffDays <= 7;\r\n          if (filters.dateRange === 'month') return diffDays <= 30;\r\n          if (filters.dateRange === 'older') return diffDays > 30;\r\n          return true;\r\n        } catch {\r\n          return true;\r\n        }\r\n      });\r\n    }\r\n    \r\n    setFilteredAnimals(result);\r\n  }, [filters, animals]);\r\n\r\n  const [sortOrder, setSortOrder] = useState('newest');\r\n\r\n  const handleSort = (order) => {\r\n    setSortOrder(order);\r\n    const sorted = [...filteredAnimals].sort((a, b) => {\r\n      try {\r\n        const dateA = new Date(a.date.split('-').reverse().join('-'));\r\n        const dateB = new Date(b.date.split('-').reverse().join('-'));\r\n        if (order === 'newest') {\r\n          return dateB - dateA;\r\n        } else {\r\n          return dateA - dateB;\r\n        }\r\n      } catch {\r\n        return 0;\r\n      }\r\n    });\r\n    setFilteredAnimals(sorted);\r\n  };\r\n\r\n  // Быстрый поиск\r\n  const handleQuickSearch = async (query) => {\r\n    if (query.length > 2) {\r\n      try {\r\n        const response = await fetch(`https://pets.xn--80ahdri7a.site/api/search?query=${encodeURIComponent(query)}`);\r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          if (data.data && data.data.orders) {\r\n            const formattedAnimals = data.data.orders.map(order => ({\r\n              id: order.id,\r\n              title: `${order.kind}, найден ${order.date}`,\r\n              description: order.description,\r\n              image: order.photos || image,\r\n              date: order.date,\r\n              type: order.kind.toLowerCase().includes('кош') ? 'cat' : \r\n                    order.kind.toLowerCase().includes('собак') ? 'dog' : \r\n                    order.kind.toLowerCase().includes('кролик') ? 'rabbit' : 'other',\r\n              age: \"возраст не указан\",\r\n              location: order.district || \"Место не указано\"\r\n            }));\r\n            setFilteredAnimals(formattedAnimals);\r\n          }\r\n        }\r\n      } catch (err) {\r\n        console.error('Ошибка быстрого поиска:', err);\r\n      }\r\n    }\r\n  };\r\n\r\n  // Поиск по фильтрам\r\n  const handleSearch = () => {\r\n    fetchAnimals(1);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"container mt-5\">\r\n        {/* Поиск по параметрам */}\r\n        <div className=\"row mb-3\">\r\n          <div className=\"col-md-4\">\r\n            <input \r\n              type=\"text\" \r\n              className=\"form-control\"\r\n              placeholder=\"Район (например, Центральный)\"\r\n              value={searchParams.district}\r\n              onChange={(e) => setSearchParams({...searchParams, district: e.target.value})}\r\n            />\r\n          </div>\r\n          <div className=\"col-md-4\">\r\n            <input \r\n              type=\"text\" \r\n              className=\"form-control\"\r\n              placeholder=\"Вид (например, кошка)\"\r\n              value={searchParams.kind}\r\n              onChange={(e) => setSearchParams({...searchParams, kind: e.target.value})}\r\n            />\r\n          </div>\r\n          <div className=\"col-md-4\">\r\n            <button className=\"btn btn-dark w-100\" onClick={handleSearch}>\r\n              Поиск\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Быстрый поиск */}\r\n        <div className=\"row mb-3\">\r\n          <div className=\"col-md-12\">\r\n            <input \r\n              type=\"text\" \r\n              className=\"form-control\"\r\n              placeholder=\"Быстрый поиск по описанию (введите минимум 3 символа)\"\r\n              onChange={(e) => {\r\n                const query = e.target.value;\r\n                if (query.length > 2) {\r\n                  const timer = setTimeout(() => {\r\n                    handleQuickSearch(query);\r\n                  }, 1000);\r\n                  return () => clearTimeout(timer);\r\n                }\r\n              }}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"row mb-5\">\r\n          <div className=\"col-12 text-center\">\r\n            <h2>Помогите найти хозяев для этих животных</h2>\r\n            <p className=\"lead\">\r\n              Найдено животных: {filteredAnimals.length}\r\n              <button \r\n                className=\"btn btn-sm btn-outline-dark ms-3\"\r\n                onClick={() => handleSort(sortOrder === 'newest' ? 'oldest' : 'newest')}\r\n              >\r\n                Сортировать по {sortOrder === 'newest' ? 'старым' : 'новым'}\r\n              </button>\r\n            </p>\r\n          </div>\r\n        </div>\r\n        \r\n        {loading ? (\r\n          <div className=\"text-center\">\r\n            <div className=\"spinner-border text-dark\" role=\"status\">\r\n              <span className=\"visually-hidden\">Загрузка...</span>\r\n            </div>\r\n            <p>Загрузка животных...</p>\r\n          </div>\r\n        ) : error ? (\r\n          <div className=\"text-center alert alert-danger\">\r\n            <h4>Ошибка загрузки</h4>\r\n            <p>{error}</p>\r\n            <button className=\"btn btn-dark\" onClick={() => fetchAnimals()}>\r\n              Повторить попытку\r\n            </button>\r\n          </div>\r\n        ) : filteredAnimals.length === 0 ? (\r\n          <div className=\"text-center\">\r\n            <h4>Животные по выбранным фильтрам не найдены</h4>\r\n            <p>Попробуйте изменить параметры фильтрации</p>\r\n          </div>\r\n        ) : (\r\n          <>\r\n            <div className=\"row mb-5\">\r\n              {filteredAnimals.slice((currentPage - 1) * 6, currentPage * 6).map(animal => (\r\n                <div key={animal.id} className=\"col-md-4 mb-4\">\r\n                  <div className=\"card animal-card h-100 d-flex flex-column\">\r\n                    <img \r\n                      src={animal.image} \r\n                      className=\"card-img-top\" \r\n                      alt={animal.type}\r\n                      style={{\r\n                        width: '100%',\r\n                        height: '300px',\r\n                        objectFit: 'cover'\r\n                      }}\r\n                      onError={(e) => {\r\n                        e.target.src = animal.type === 'cat' ? image : \r\n                                      animal.type === 'dog' ? image1 : \r\n                                      animal.type === 'rabbit' ? image2 : image;\r\n                      }}\r\n                    />\r\n                    <div className=\"card-body d-flex flex-column\">\r\n                      <h5 className=\"card-title\">{animal.title}</h5>\r\n                      <p className=\"card-text flex-grow-1\">{animal.description}</p>\r\n                      <div className=\"mb-2\">\r\n                        <span className=\"badge bg-secondary me-2\">{animal.age}</span>\r\n                        <span className=\"badge bg-info\">{animal.location}</span>\r\n                        {animal.mark && (\r\n                          <span className=\"badge bg-warning text-dark ms-2\">\r\n                            Клеймо: {animal.mark}\r\n                          </span>\r\n                        )}\r\n                      </div>\r\n                      <div className=\"mt-auto\">\r\n                        <button \r\n                          className=\"btn btn-dark me-3\" \r\n                          data-bs-toggle=\"modal\" \r\n                          data-bs-target=\"#cart\"\r\n                          onClick={() => {\r\n                            // Здесь можно передать данные в модальное окно\r\n                            localStorage.setItem('selectedAnimal', JSON.stringify(animal));\r\n                          }}\r\n                        >\r\n                          Подробнее\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n            \r\n            {/* Пагинация */}\r\n            {totalPages > 1 && (\r\n              <nav aria-label=\"Пагинация\">\r\n                <ul className=\"pagination justify-content-center\">\r\n                  <li className={`page-item ${currentPage === 1 ? 'disabled' : ''}`}>\r\n                    <button \r\n                      className=\"page-link\" \r\n                      onClick={() => setCurrentPage(currentPage - 1)}\r\n                      disabled={currentPage === 1}\r\n                    >\r\n                      Назад\r\n                    </button>\r\n                  </li>\r\n                  \r\n                  {[...Array(totalPages)].map((_, index) => (\r\n                    <li key={index} className={`page-item ${currentPage === index + 1 ? 'active' : ''}`}>\r\n                      <button \r\n                        className=\"page-link\" \r\n                        onClick={() => setCurrentPage(index + 1)}\r\n                      >\r\n                        {index + 1}\r\n                      </button>\r\n                    </li>\r\n                  ))}\r\n                  \r\n                  <li className={`page-item ${currentPage === totalPages ? 'disabled' : ''}`}>\r\n                    <button \r\n                      className=\"page-link\" \r\n                      onClick={() => setCurrentPage(currentPage + 1)}\r\n                      disabled={currentPage === totalPages}\r\n                    >\r\n                      Вперед\r\n                    </button>\r\n                  </li>\r\n                </ul>\r\n              </nav>\r\n            )}\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Find_animal;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}