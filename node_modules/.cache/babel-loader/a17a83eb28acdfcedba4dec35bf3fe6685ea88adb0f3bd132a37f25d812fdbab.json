{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Routes,Route,useLocation}from'react-router-dom';import HomePage from'./components/pages/HomePage';import FindAnimalsPage from'./components/pages/FindAnimalsPage';import Header from'./components/layout/Header';import Footer from'./components/layout/Footer';import{AuthProvider}from'./components/auth/AuthContext';import AnimalModal from'./components/animals/AnimalModal';import FoundAnimalForm from'./components/forms/FoundAnimalForm';import ContactForm from'./components/forms/ContactForm';import ProfileModal from'./components/profile/ProfileModal';import AuthModal from'./components/auth/AuthModal';// Компонент для отображения модальных окон на всех страницах\nimport{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const GlobalModals=()=>/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(FoundAnimalForm,{}),/*#__PURE__*/_jsx(ContactForm,{}),/*#__PURE__*/_jsx(ProfileModal,{}),/*#__PURE__*/_jsx(AuthModal,{})]});// Ключевой компонент - оборачиваем каждую страницу в уникальный ключ\nfunction AppContent(){const[selectedAnimalId,setSelectedAnimalId]=useState(null);const location=useLocation();// Слушаем глобальные события для открытия модальных окон\nuseEffect(()=>{const handleOpenAnimalModal=event=>{setSelectedAnimalId(event.detail.animalId);};window.addEventListener('openAnimalModal',handleOpenAnimalModal);return()=>{window.removeEventListener('openAnimalModal',handleOpenAnimalModal);};},[]);// При изменении локации скрываем модальное окно животного\nuseEffect(()=>{setSelectedAnimalId(null);},[location]);return/*#__PURE__*/_jsxs(\"div\",{className:\"app-container\",children:[/*#__PURE__*/_jsx(Header,{onAnimalClick:setSelectedAnimalId}),/*#__PURE__*/_jsx(\"main\",{className:\"main-content\",children:/*#__PURE__*/_jsxs(Routes,{location:location,children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(HomePage,{},\"home\")}),/*#__PURE__*/_jsx(Route,{path:\"/find-animals\",element:/*#__PURE__*/_jsx(FindAnimalsPage,{},\"find-animals\")})]},location.pathname)}),/*#__PURE__*/_jsx(Footer,{}),/*#__PURE__*/_jsx(GlobalModals,{}),selectedAnimalId&&/*#__PURE__*/_jsx(AnimalModal,{animalId:selectedAnimalId,onClose:()=>setSelectedAnimalId(null)})]});}function App(){return/*#__PURE__*/_jsx(AuthProvider,{children:/*#__PURE__*/_jsx(AppContent,{})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","Routes","Route","useLocation","HomePage","FindAnimalsPage","Header","Footer","AuthProvider","AnimalModal","FoundAnimalForm","ContactForm","ProfileModal","AuthModal","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","GlobalModals","children","AppContent","selectedAnimalId","setSelectedAnimalId","location","handleOpenAnimalModal","event","detail","animalId","window","addEventListener","removeEventListener","className","onAnimalClick","path","element","pathname","onClose","App"],"sources":["C:/Users/2053-23/pets.site3-main/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Routes, Route, useLocation } from 'react-router-dom';\nimport HomePage from './components/pages/HomePage';\nimport FindAnimalsPage from './components/pages/FindAnimalsPage';\nimport Header from './components/layout/Header';\nimport Footer from './components/layout/Footer';\nimport { AuthProvider } from './components/auth/AuthContext';\nimport AnimalModal from './components/animals/AnimalModal';\nimport FoundAnimalForm from './components/forms/FoundAnimalForm';\nimport ContactForm from './components/forms/ContactForm';\nimport ProfileModal from './components/profile/ProfileModal';\nimport AuthModal from './components/auth/AuthModal';\n\n// Компонент для отображения модальных окон на всех страницах\nconst GlobalModals = () => (\n  <>\n    <FoundAnimalForm />\n    <ContactForm />\n    <ProfileModal />\n    <AuthModal />\n  </>\n);\n\n// Ключевой компонент - оборачиваем каждую страницу в уникальный ключ\nfunction AppContent() {\n  const [selectedAnimalId, setSelectedAnimalId] = useState(null);\n  const location = useLocation();\n\n  // Слушаем глобальные события для открытия модальных окон\n  useEffect(() => {\n    const handleOpenAnimalModal = (event) => {\n      setSelectedAnimalId(event.detail.animalId);\n    };\n\n    window.addEventListener('openAnimalModal', handleOpenAnimalModal);\n    \n    return () => {\n      window.removeEventListener('openAnimalModal', handleOpenAnimalModal);\n    };\n  }, []);\n\n  // При изменении локации скрываем модальное окно животного\n  useEffect(() => {\n    setSelectedAnimalId(null);\n  }, [location]);\n\n  return (\n    <div className=\"app-container\">\n      <Header onAnimalClick={setSelectedAnimalId} />\n      <main className=\"main-content\">\n        <Routes location={location} key={location.pathname}>\n          <Route path=\"/\" element={<HomePage key=\"home\" />} />\n          <Route path=\"/find-animals\" element={<FindAnimalsPage key=\"find-animals\" />} />\n        </Routes>\n      </main>\n      <Footer />\n      \n      {/* Глобальные модальные окна (доступны на всех страницах) */}\n      <GlobalModals />\n      \n      {/* Модальное окно с животным */}\n      {selectedAnimalId && (\n        <AnimalModal \n          animalId={selectedAnimalId} \n          onClose={() => setSelectedAnimalId(null)}\n        />\n      )}\n    </div>\n  );\n}\n\nfunction App() {\n  return (\n    <AuthProvider>\n      <AppContent />\n    </AuthProvider>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}