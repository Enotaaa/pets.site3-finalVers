{"ast":null,"code":"import _objectSpread from\"C:/Users/2053-23/pets.site3-main/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{useAuth}from'./AuthContext';import RegistrationForm from'./RegistrationForm';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AuthModal=()=>{const[isLoginMode,setIsLoginMode]=useState(true);const[formData,setFormData]=useState({email:'',password:''});const[errors,setErrors]=useState({});const[message,setMessage]=useState({type:'',text:''});const{login}=useAuth();const validateLoginForm=()=>{const newErrors={};if(!formData.email)newErrors.email='Email обязателен';if(!formData.password)newErrors.password='Пароль обязателен';return newErrors;};const handleLogin=async e=>{e.preventDefault();setErrors({});setMessage({type:'',text:''});const validationErrors=validateLoginForm();if(Object.keys(validationErrors).length>0){setErrors(validationErrors);return;}const result=await login(formData.email,formData.password);if(result.success){setMessage({type:'success',text:'Успешный вход!'});setTimeout(()=>{var _document$getElementB;(_document$getElementB=document.getElementById('closeAuthModal'))===null||_document$getElementB===void 0?void 0:_document$getElementB.click();},1000);}else{setMessage({type:'danger',text:result.error});}};const handleInputChange=e=>{const{name,value}=e.target;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));if(errors[name]){setErrors(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:null}));}};return/*#__PURE__*/_jsx(\"div\",{className:\"modal fade\",id:\"authModal\",tabIndex:\"-1\",children:/*#__PURE__*/_jsx(\"div\",{className:\"modal-dialog\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"modal-title\",children:isLoginMode?'Вход в аккаунт':'Регистрация'}),/*#__PURE__*/_jsx(\"button\",{id:\"closeAuthModal\",type:\"button\",className:\"btn-close\",\"data-bs-dismiss\":\"modal\",onClick:()=>{setErrors({});setMessage({type:'',text:''});setFormData({email:'',password:''});}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"btn-group w-100\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn \".concat(isLoginMode?'btn-dark':'btn-outline-dark'),onClick:()=>setIsLoginMode(true),children:\"\\u0412\\u0445\\u043E\\u0434\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn \".concat(!isLoginMode?'btn-dark':'btn-outline-dark'),onClick:()=>setIsLoginMode(false),children:\"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\"})]})}),isLoginMode?/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleLogin,children:[message.text&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-\".concat(message.type),children:message.text}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control \".concat(errors.email?'is-invalid':''),name:\"email\",value:formData.email,onChange:handleInputChange,placeholder:\"user@example.com\"}),errors.email&&/*#__PURE__*/_jsx(\"div\",{className:\"invalid-feedback\",children:errors.email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control \".concat(errors.password?'is-invalid':''),name:\"password\",value:formData.password,onChange:handleInputChange,placeholder:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\"}),errors.password&&/*#__PURE__*/_jsx(\"div\",{className:\"invalid-feedback\",children:errors.password})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-text mb-3\",children:\"\\u0422\\u0435\\u0441\\u0442\\u043E\\u0432\\u044B\\u0439 \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442: user@user.rl / paSSword1\"})]}):/*#__PURE__*/_jsx(RegistrationForm,{})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",\"data-bs-dismiss\":\"modal\",children:\"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-dark\",onClick:isLoginMode?handleLogin:undefined,children:isLoginMode?'Войти':'Зарегистрироваться'})]})]})})});};export default AuthModal;","map":{"version":3,"names":["React","useState","useAuth","RegistrationForm","jsx","_jsx","jsxs","_jsxs","AuthModal","isLoginMode","setIsLoginMode","formData","setFormData","email","password","errors","setErrors","message","setMessage","type","text","login","validateLoginForm","newErrors","handleLogin","e","preventDefault","validationErrors","Object","keys","length","result","success","setTimeout","_document$getElementB","document","getElementById","click","error","handleInputChange","name","value","target","prev","_objectSpread","className","id","tabIndex","children","onClick","concat","onSubmit","onChange","placeholder","undefined"],"sources":["C:/Users/2053-23/pets.site3-main/src/components/auth/AuthModal.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useAuth } from './AuthContext';\r\nimport RegistrationForm from './RegistrationForm';\r\n\r\nconst AuthModal = () => {\r\n  const [isLoginMode, setIsLoginMode] = useState(true);\r\n  const [formData, setFormData] = useState({ email: '', password: '' });\r\n  const [errors, setErrors] = useState({});\r\n  const [message, setMessage] = useState({ type: '', text: '' });\r\n  const { login } = useAuth();\r\n\r\n  const validateLoginForm = () => {\r\n    const newErrors = {};\r\n    if (!formData.email) newErrors.email = 'Email обязателен';\r\n    if (!formData.password) newErrors.password = 'Пароль обязателен';\r\n    return newErrors;\r\n  };\r\n\r\n  const handleLogin = async (e) => {\r\n    e.preventDefault();\r\n    setErrors({});\r\n    setMessage({ type: '', text: '' });\r\n\r\n    const validationErrors = validateLoginForm();\r\n    if (Object.keys(validationErrors).length > 0) {\r\n      setErrors(validationErrors);\r\n      return;\r\n    }\r\n\r\n    const result = await login(formData.email, formData.password);\r\n    if (result.success) {\r\n      setMessage({ type: 'success', text: 'Успешный вход!' });\r\n      setTimeout(() => {\r\n        document.getElementById('closeAuthModal')?.click();\r\n      }, 1000);\r\n    } else {\r\n      setMessage({ type: 'danger', text: result.error });\r\n    }\r\n  };\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({ ...prev, [name]: value }));\r\n    if (errors[name]) {\r\n      setErrors(prev => ({ ...prev, [name]: null }));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"modal fade\" id=\"authModal\" tabIndex=\"-1\">\r\n      <div className=\"modal-dialog\">\r\n        <div className=\"modal-content\">\r\n          <div className=\"modal-header\">\r\n            <h5 className=\"modal-title\">\r\n              {isLoginMode ? 'Вход в аккаунт' : 'Регистрация'}\r\n            </h5>\r\n            <button \r\n              id=\"closeAuthModal\"\r\n              type=\"button\" \r\n              className=\"btn-close\" \r\n              data-bs-dismiss=\"modal\"\r\n              onClick={() => {\r\n                setErrors({});\r\n                setMessage({ type: '', text: '' });\r\n                setFormData({ email: '', password: '' });\r\n              }}\r\n            />\r\n          </div>\r\n          \r\n          <div className=\"modal-body\">\r\n            <div className=\"mb-3\">\r\n              <div className=\"btn-group w-100\">\r\n                <button\r\n                  type=\"button\"\r\n                  className={`btn ${isLoginMode ? 'btn-dark' : 'btn-outline-dark'}`}\r\n                  onClick={() => setIsLoginMode(true)}\r\n                >\r\n                  Вход\r\n                </button>\r\n                <button\r\n                  type=\"button\"\r\n                  className={`btn ${!isLoginMode ? 'btn-dark' : 'btn-outline-dark'}`}\r\n                  onClick={() => setIsLoginMode(false)}\r\n                >\r\n                  Регистрация\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            {isLoginMode ? (\r\n              <form onSubmit={handleLogin}>\r\n                {message.text && (\r\n                  <div className={`alert alert-${message.type}`}>\r\n                    {message.text}\r\n                  </div>\r\n                )}\r\n                \r\n                <div className=\"mb-3\">\r\n                  <label className=\"form-label\">Email</label>\r\n                  <input\r\n                    type=\"email\"\r\n                    className={`form-control ${errors.email ? 'is-invalid' : ''}`}\r\n                    name=\"email\"\r\n                    value={formData.email}\r\n                    onChange={handleInputChange}\r\n                    placeholder=\"user@example.com\"\r\n                  />\r\n                  {errors.email && (\r\n                    <div className=\"invalid-feedback\">{errors.email}</div>\r\n                  )}\r\n                </div>\r\n                \r\n                <div className=\"mb-3\">\r\n                  <label className=\"form-label\">Пароль</label>\r\n                  <input\r\n                    type=\"password\"\r\n                    className={`form-control ${errors.password ? 'is-invalid' : ''}`}\r\n                    name=\"password\"\r\n                    value={formData.password}\r\n                    onChange={handleInputChange}\r\n                    placeholder=\"Пароль\"\r\n                  />\r\n                  {errors.password && (\r\n                    <div className=\"invalid-feedback\">{errors.password}</div>\r\n                  )}\r\n                </div>\r\n                \r\n                <div className=\"form-text mb-3\">\r\n                  Тестовый аккаунт: user@user.rl / paSSword1\r\n                </div>\r\n              </form>\r\n            ) : (\r\n              <RegistrationForm />\r\n            )}\r\n          </div>\r\n          \r\n          <div className=\"modal-footer\">\r\n            <button \r\n              type=\"button\" \r\n              className=\"btn btn-secondary\" \r\n              data-bs-dismiss=\"modal\"\r\n            >\r\n              Закрыть\r\n            </button>\r\n            <button \r\n              type=\"button\" \r\n              className=\"btn btn-dark\"\r\n              onClick={isLoginMode ? handleLogin : undefined}\r\n            >\r\n              {isLoginMode ? 'Войти' : 'Зарегистрироваться'}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AuthModal;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}